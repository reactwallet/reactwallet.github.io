(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5366:function(e,t,a){e.exports=a(5534)},5371:function(e,t,a){},5534:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),l=a.n(c),o=(a(5371),a(59)),u=a(21),s=a(22),i=a(24),d=a(23),m=a(25),p=a(9),h=a(14),f=a(5536),y=a(5538),b=a(5537),g=a(17),E=a(12),O=a(65),v=a.n(O),C=a(10),j=a(28),A=a.n(j),S=a(13),I=a.n(S),N=a(27),w=a.n(N),k=a(41),D=a.n(k),T=a(34),R=a.n(T),x=a(30),P=a.n(x),F=a(47),W=a.n(F),H=a(76),_=a.n(H),U=a(36),L=a.n(U),B=a(39),M=a.n(B),G=a(38),K=a.n(G),V=a(37),Y=a.n(V),z=a(141),J=a.n(z),Z=a(32),q=a.n(Z),X=["AUD","BGN","BRL","CAD","CHF","CNY","CZK","DKK","EUR","GBP","HKD","HRK","HUF","IDR","ILS","INR","ISK","JPY","KRW","MXN","MYR","NOK","NZD","PHP","PLN","RON","RUB","SEK","SGD","THB","TRY","USD","ZAR"],$=function(){return"_"+Math.random().toString(36).substr(2,9)},Q=function(e,t,a){var n=t[a]||{};return e.reduce(function(e,t){return t.currency===a?e+Number(t.value):e+Number(t.value)/n[t.currency]},0).toFixed(2)+" "+a},ee=function(e){return Array.isArray(e)?{byId:e.reduce(function(e,t){return e[t.id]=t,e},{}),allIds:e.map(function(e){return e.id})}:e},te=function(e){return{type:"ADD_ACCOUNT",payload:e}},ae=function(e){return{type:"ADD_HISTORY",payload:e}},ne=function(e){return{type:"CHANGE_DEFAULT_CURRENCY",payload:e}},re=function(e){return function(t,a){return fetch("https://api.exchangeratesapi.io/latest?base="+e).then(ce).then(function(e){return e.json()}).then(function(e){var a;t((a=e,{type:"FETCH_RATES_SUCCESS",payload:Object(h.a)({},a.base,a.rates)}))}).catch(function(e){return t(function(e){return{type:"FETCH_RATES_FAILURE",payload:e}}(e))})}};function ce(e){if(!e.ok)throw Error(e.statusText);return e}var le=a(42),oe=["Cash","Cards & Bank Accounts","Debts","Investments","Others"].reduce(function(e,t){var a=$();return e.byId[a]={id:a,name:t},e.allIds.push(a),e},{byId:{},allIds:[]}),ue=Object(le.c)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe.byId,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_GROUP":return Object(C.a)({},e,Object(h.a)({},t.payload.groupId,Object(C.a)({},e[t.payload.groupId],{collapsed:t.payload.collapsed})));default:return e}},allIds:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe.allIds}}),se=function(e){return e.allIds.map(function(t){return e.byId[t]})},ie=function(e){return{name:"",groupId:e.groups[0].id,currency:e.defaultCurrency,value:"",nameFieldError:!1}},de=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){return function(t){var n=t.target.value;"value"===e&&(n=Math.max(0,Number(t.target.value))),"name"===e&&n.trim().length&&a.setState({nameFieldError:!1}),a.setState(Object(h.a)({},e,n))}},a.handleOpen=function(e){a.setState(Object(C.a)({open:!0},ie(a.props)))},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){if(a.state.name){var e=a.state.value||0;a.props.rates[a.state.currency]||(a.props.fetchRates(a.state.currency),a.props.fetchRates(a.props.defaultCurrency)),a.props.addAccount({id:$(),name:a.state.name,groupId:a.state.groupId,currency:a.state.currency,value:e}),a.props.addHistory({text:"Created ".concat(a.state.name," account with ").concat(e," ").concat(a.state.currency," balance"),date:A()().format()}),a.props.hasAccounts||a.props.defaultCurrency===a.state.currency||(a.props.changeDefaultCurrency(a.state.currency),a.props.addHistory({text:"Default currency has been automatically changed to ".concat(a.state.currency),date:A()().format()})),a.handleClose()}else a.setState({nameFieldError:!0})},a.state=Object(C.a)({open:!1},ie(e)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{color:"primary","aria-label":"Add",className:e.fab,onClick:this.handleOpen},r.a.createElement(_.a,null)),r.a.createElement(L.a,{PaperProps:{className:e.dialog},open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Y.a,{id:"form-dialog-title"},"Add Account"),r.a.createElement(K.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{error:this.state.nameFieldError,autoFocus:!0,fullWidth:!0,required:!0,label:"Account name",placeholder:"",value:this.state.name,onChange:this.handleChange("name"),InputLabelProps:{shrink:!0}}),r.a.createElement(q.a,{fullWidth:!0,select:!0,label:"Group",className:e.dense,value:this.state.groupId,onChange:this.handleChange("groupId"),SelectProps:{native:!0}},this.props.groups.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),r.a.createElement(q.a,{fullWidth:!0,select:!0,label:"Currency",className:e.dense,value:this.state.currency,onChange:this.handleChange("currency"),SelectProps:{native:!0}},X.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})),r.a.createElement(q.a,{fullWidth:!0,label:"Amount (optional)",placeholder:"0.00",type:"number",className:e.dense,value:this.state.value,onChange:this.handleChange("value"),InputLabelProps:{shrink:!0}}))),r.a.createElement(M.a,null,r.a.createElement(I.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(I.a,{onClick:this.handleSubmit,color:"primary"},"Add"))))}}]),t}(r.a.Component),me=Object(g.a)(Object(p.b)(function(e){return{hasAccounts:e.accounts.allIds.length>0,defaultCurrency:e.settings.defaultCurrency,groups:se(e.groups),rates:e.rates}},{addAccount:te,addHistory:ae,fetchRates:re,changeDefaultCurrency:ne}),Object(E.withStyles)(function(e){return{fab:{position:"fixed",bottom:6*e.spacing.unit,right:6*e.spacing.unit,zIndex:1},dialog:{maxWidth:"80%",width:300},dense:{marginTop:3*e.spacing.unit}}}))(de),pe=a(143),he=a.n(pe),fe=a(78),ye=a.n(fe),be=a(77),ge=a.n(be),Ee=a(5535),Oe=Object(g.a)(Object(E.withStyles)(function(e){return{linkListItem:{textDecoration:"none"},listItemButton:Object(h.a)({color:e.palette.action.active,paddingLeft:6*e.spacing.unit,paddingRight:7*e.spacing.unit},e.breakpoints.down(375),{paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit}),value:{whiteSpace:"nowrap"}}}),Object(p.b)())(function(e){var t=e.account,a=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,{to:"/details/"+t.id,className:a.linkListItem},r.a.createElement(R.a,{button:!0,classes:{button:a.listItemButton}},r.a.createElement(P.a,{primary:t.name,primaryTypographyProps:{className:"noWrap"}}),r.a.createElement("span",{className:a.value},Number(t.value).toFixed(2)+" "+t.currency))),r.a.createElement(w.a,null))}),ve=a(142),Ce=a.n(ve),je=Object(le.c)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ACCOUNT":return Object(C.a)({},e,Object(h.a)({},t.payload.id,t.payload));case"EDIT_ACCOUNT":return Object(C.a)({},e,Object(h.a)({},t.payload.id,Object(C.a)({},e[t.payload.id],t.payload)));case"DELETE_ACCOUNT":var a=Object(C.a)({},e);return delete a[t.payload.id],a;case"MAKE_DEPOSIT":var n=e[t.payload.accountId];return Object(C.a)({},e,Object(h.a)({},t.payload.accountId,Object(C.a)({},n,{value:Number(n.value)+t.payload.value})));case"MAKE_WITHDRAWAL":var r=e[t.payload.accountId];return Object(C.a)({},e,Object(h.a)({},t.payload.accountId,Object(C.a)({},r,{value:Math.max(0,Number(r.value)-t.payload.value)})));case"MAKE_TRANSFER":var c,l=e[t.payload.fromAccountId],o=e[t.payload.toAccountId];return Object(C.a)({},e,(c={},Object(h.a)(c,t.payload.fromAccountId,Object(C.a)({},l,{value:Math.max(0,Number(l.value)-t.payload.fromAccountValue)})),Object(h.a)(c,t.payload.toAccountId,Object(C.a)({},o,{value:Number(o.value)+t.payload.toAccountValue})),c));default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ACCOUNT":return[].concat(Object(o.a)(e),[t.payload.id]);case"DELETE_ACCOUNT":return e.filter(function(e){return e!==t.payload.id});default:return e}}}),Ae=function(e){return e.allIds.map(function(t){return e.byId[t]})},Se=Object(p.b)(function(e,t){var a=t.accounts||Ae(e.accounts);return{total:Q(a,e.rates,e.settings.defaultCurrency)}})(function(e){var t=e.total;return r.a.createElement(r.a.Fragment,null,~t.indexOf("NaN")?r.a.createElement(Ce.a,{size:20}):t)}),Ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.toggleGroup({groupId:a.props.group.id,collapsed:!a.props.group.collapsed})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.accounts,a=e.classes,n=e.group;return r.a.createElement(r.a.Fragment,null,t.length>0&&r.a.createElement(r.a.Fragment,{key:n.name},r.a.createElement(R.a,{button:!0,onClick:this.handleClick},r.a.createElement(P.a,{primary:n.name,primaryTypographyProps:{className:"noWrap"}}),r.a.createElement("span",{className:a.total},r.a.createElement(Se,{accounts:t})),n.collapsed?r.a.createElement(ge.a,null):r.a.createElement(ye.a,null)),r.a.createElement(w.a,null),r.a.createElement(he.a,{in:!n.collapsed,timeout:"auto",unmountOnExit:!0},r.a.createElement(D.a,{component:"div",disablePadding:!0},t.length>0&&t.map(function(e){return r.a.createElement(Oe,{account:e,key:e.id})}))),r.a.createElement(w.a,null)))}}]),t}(r.a.Component),Ne=Object(g.a)(Object(E.withStyles)(function(e){return{total:{fontWeight:"bold",marginRight:2*e.spacing.unit,whiteSpace:"nowrap"}}}),Object(p.b)(function(e,t){return{accounts:Ae(e.accounts).filter(function(e){return e.groupId===t.group.id}).sort(function(e,t){return e.name>t.name?1:-1})}},{toggleGroup:function(e){return{type:"TOGGLE_GROUP",payload:e}}}))(Ie),we=a(45),ke=a.n(we),De=Object(E.withStyles)(function(e){return{empty:{paddingTop:3*e.spacing.unit,paddingLeft:3*e.spacing.unit,paddingRight:3*e.spacing.unit,"&:last-child":{paddingBottom:3*e.spacing.unit}}}})(function(e){var t=e.classes,a=e.children,n=e.title;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{variant:"h5",className:t.empty},n),r.a.createElement(ke.a,{variant:"subtitle1",className:t.empty},a))}),Te=Object(g.a)(Object(E.withStyles)(function(e){return{total:{lineHeight:1.5,fontWeight:"bold",paddingRight:7*e.spacing.unit},loadButton:Object(C.a)({},e.typography.subtitle1,{textTransform:"none",textDecoration:"underline",padding:0,minWidth:"auto",color:"#0000EE","&:hover":{backgroundColor:"transparent"}})}}),Object(p.b)(function(e){return{hasAccounts:e.accounts.allIds.length>0,groups:se(e.groups)}},{addHistory:ae,fetchRates:re,loadDemoData:function(){return{type:"LOAD_DEMO_DATA"}}}))(function(e){var t=e.addHistory,a=e.classes,n=e.groups,c=e.hasAccounts,l=e.loadDemoData,o=e.fetchRates;return r.a.createElement(r.a.Fragment,null,r.a.createElement(me,null),c?r.a.createElement(D.a,{disablePadding:!0},r.a.createElement(W.a,{disableSticky:!0},"Accounts"),r.a.createElement(w.a,null),n.map(function(e){return r.a.createElement(Ne,{key:e.id,group:e})}),r.a.createElement(R.a,{className:a.total},r.a.createElement(P.a,{primary:"Total",disableTypography:!0}),r.a.createElement(Se,null))):r.a.createElement(De,{title:"Your wallet is empty"},"Add accounts from the button below or \xa0",r.a.createElement(I.a,{color:"primary",onClick:function(e){l(),o("USD"),t({text:"Loaded the wallet with the demo data",date:A()().format()})},className:a.loadButton},"load"),"\xa0 some dummy data for demo purposes"))}),Re=a(153),xe=a(144),Pe=a.n(xe),Fe=a(146),We=a.n(Fe),He=a(84),_e=a.n(He),Ue=a(145),Le=a.n(Ue),Be=a(100),Me=a.n(Be),Ge=function(){return r.a.createElement(De,{title:"Page not found"},"You can start from ",r.a.createElement(Ee.a,{to:"/"},"here"))},Ke=a(56),Ve=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(){return function(e){a.setState({value:Math.max(0,Number(e.target.value))})}},a.handleOpen=function(){a.setState({open:!0,value:""})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){a.props.makeDeposit({accountId:a.props.account.id,value:a.state.value}),a.props.addHistory({text:"Deposited ".concat(a.state.value," ").concat(a.props.account.currency," to         ").concat(a.props.account.name),date:A()().format()}),a.handleClose()},a.state={open:!1,value:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{color:"primary",onClick:this.handleOpen},"Deposit",r.a.createElement(Ke.a,{style:{fontSize:16,marginLeft:6}})),r.a.createElement(L.a,{PaperProps:{className:e.dialog},open:this.state.open,onClose:this.handleClose,"aria-labelledby":"deposit-dialog-title"},r.a.createElement(Y.a,{id:"deposit-dialog-title"},"Deposit Funds"),r.a.createElement(K.a,null,r.a.createElement(q.a,{autoFocus:!0,fullWidth:!0,label:"Amount",type:"number",value:this.state.value,onChange:this.handleChange("value")})),r.a.createElement(M.a,null,r.a.createElement(I.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(I.a,{onClick:this.handleSubmit,color:"primary"},"Deposit"))))}}]),t}(r.a.Component),Ye=Object(g.a)(Object(p.b)(null,{makeDeposit:function(e){return{type:"MAKE_DEPOSIT",payload:e}},addHistory:ae}),Object(E.withStyles)(function(e){return{dialog:{maxWidth:"80%",width:300}}}))(Ve),ze=a(58),Je=a.n(ze),Ze=a(79),qe=a.n(Ze),Xe=a(57),$e=a.n(Xe),Qe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleOpen=function(e){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){a.props.deleteAccount(a.props.account),a.props.addHistory({text:"Removed account ".concat(a.props.account.name),date:A()().format()}),a.handleClose()},a.state={open:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{className:e.button,"aria-label":"Delete",onClick:this.handleOpen},r.a.createElement(qe.a,null)),r.a.createElement(L.a,{PaperProps:{className:e.dialog},open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Y.a,{id:"form-dialog-title"},"Delete Account"),r.a.createElement(K.a,null,r.a.createElement(Je.a,{className:e.dense},"This action will remove both the account and its balance and cannot be undone.",r.a.createElement("br",null),r.a.createElement("br",null),"Are you sure?")),r.a.createElement(M.a,null,r.a.createElement(I.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(Ee.a,{to:"/",className:"noDecoration"},r.a.createElement(I.a,{onClick:this.handleSubmit,color:"secondary"},"Delete")))))}}]),t}(r.a.Component),et=Object(g.a)(Object(p.b)(null,{deleteAccount:function(e){return{type:"DELETE_ACCOUNT",payload:e}},addHistory:ae}),Object(E.withStyles)(function(e){return{dialog:{maxWidth:"80%",width:450}}}))(Qe),tt=a(80),at=a.n(tt),nt=function(e){return{name:e.account.name,groupId:e.account.groupId,nameFieldError:!1}},rt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){return function(t){var n=t.target.value;"name"===e&&n.trim().length&&a.setState({nameFieldError:!1}),a.setState(Object(h.a)({},e,n))}},a.handleOpen=function(e){a.setState(Object(C.a)({open:!0},nt(a.props)))},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){if(a.state.name){a.props.editAccount({id:a.props.account.id,name:a.state.name,groupId:a.state.groupId});var e=a.props.groups.find(function(e){return e.id===a.props.account.groupId}),t=a.props.groups.find(function(e){return e.id===a.state.groupId});a.props.addHistory({text:"Account ".concat(a.props.account.name," (").concat(e.name,") was changed to           ").concat(a.state.name," (").concat(t.name,") "),date:A()().format()}),a.handleClose()}else a.setState({nameFieldError:!0})},a.state=Object(C.a)({open:!1},nt(e)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{className:e.button,"aria-label":"Edit",onClick:this.handleOpen},r.a.createElement(at.a,null)),r.a.createElement(L.a,{PaperProps:{className:e.dialog},open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Y.a,{id:"form-dialog-title"},"Edit Account"),r.a.createElement(K.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{error:this.state.nameFieldError,autoFocus:!0,fullWidth:!0,required:!0,label:"Account name",placeholder:"",value:this.state.name,onChange:this.handleChange("name"),InputLabelProps:{shrink:!0}}),r.a.createElement(q.a,{fullWidth:!0,select:!0,label:"Group",className:e.dense,value:this.state.groupId,onChange:this.handleChange("groupId"),SelectProps:{native:!0}},this.props.groups.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement(M.a,null,r.a.createElement(I.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(I.a,{onClick:this.handleSubmit,color:"primary"},"Edit"))))}}]),t}(r.a.Component),ct=Object(g.a)(Object(p.b)(function(e){return{groups:se(e.groups)}},{editAccount:function(e){return{type:"EDIT_ACCOUNT",payload:e}},addHistory:ae}),Object(E.withStyles)(function(e){return{dialog:{maxWidth:"80%",width:300},dense:{marginTop:3*e.spacing.unit}}}))(rt),lt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(){return function(e){var t=e.target.value;a.setState(function(e,a){return t=Math.max(0,Number(t)),{value:t=Math.min(t,a.account.value)}})}},a.handleOpen=function(){a.setState({open:!0,value:""})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){a.props.makeWithdrawal({accountId:a.props.account.id,value:a.state.value}),a.props.addHistory({text:"Withdrew ".concat(a.state.value," ").concat(a.props.account.currency," from         ").concat(a.props.account.name),date:A()().format()}),a.handleClose()},a.state={open:!1,value:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{color:"secondary",onClick:this.handleOpen},"Withdraw",r.a.createElement(Ke.c,{style:{fontSize:16,marginLeft:6}})),r.a.createElement(L.a,{PaperProps:{className:e.dialog},open:this.state.open,onClose:this.handleClose,"aria-labelledby":"withdraw-dialog-title"},r.a.createElement(Y.a,{id:"withdraw-dialog-title"},"Withdraw Funds"),r.a.createElement(K.a,null,r.a.createElement(q.a,{autoFocus:!0,fullWidth:!0,label:"Amount",type:"number",value:this.state.value,onChange:this.handleChange("value")})),r.a.createElement(M.a,null,r.a.createElement(I.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(I.a,{onClick:this.handleSubmit,color:"secondary"},"Withdraw"))))}}]),t}(r.a.Component),ot=Object(g.a)(Object(p.b)(null,{makeWithdrawal:function(e){return{type:"MAKE_WITHDRAWAL",payload:e}},addHistory:ae}),Object(E.withStyles)(function(e){return{dialog:{maxWidth:"80%",width:300}}}))(lt),ut=a(154),st=function(e){return{fromAccountValue:"",toAccountId:e.accounts[0].id}},it=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){return function(t){var n=t.target.value;a.setState(function(t,a){return"fromAccountValue"===e&&(n=Math.max(0,Number(n)),n=Math.min(n,a.fromAccount.value)),Object(h.a)({},e,n)})}},a.handleOpen=function(){a.setState(function(e,t){return Object(C.a)({open:!0},st(t))})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){if(a.state.fromAccountValue>0){var e=1,t=a.props.fromAccount,n=a.props.accounts.find(function(e){return e.id===a.state.toAccountId}),r={fromAccountId:a.props.fromAccount.id,fromAccountValue:a.state.fromAccountValue,toAccountId:a.state.toAccountId};if(t.currency!==n.currency)if(!(e=(a.props.rates[t.currency]||{})[n.currency]))return alert("No rate for this, please try again. If that doesn't help, refresh the page"),void a.handleClose();r.toAccountValue=r.fromAccountValue*e,a.props.makeTransfer(r),a.props.addHistory({text:"Transfered ".concat(t.value," ").concat(t.currency," from           ").concat(t.name," to ").concat(r.toAccountValue," ").concat(n.currency," in           ").concat(n.name),date:A()().format()})}a.handleClose()},a.state=Object(C.a)({open:!1},st(e)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=Object(ut.a)(t,["classes"]),c=n.accounts.find(function(t){return t.id===e.state.toAccountId}),l=1;n.fromAccount.currency!==c.currency&&(l=(n.rates[n.fromAccount.currency]||{})[c.currency]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{onClick:this.handleOpen,className:a.actionButton},"Transfer",r.a.createElement(Ke.b,{style:{fontSize:16,marginLeft:6}})),r.a.createElement(L.a,{PaperProps:{className:a.dialog},open:this.state.open,onClose:this.handleClose,"aria-labelledby":"transfer-dialog-title"},r.a.createElement(Y.a,{id:"transfer-dialog-title"},"Transfer Funds"),r.a.createElement(K.a,null,r.a.createElement(q.a,{select:!0,fullWidth:!0,label:"Transfer To",value:this.state.toAccountId,onChange:this.handleChange("toAccountId"),SelectProps:{native:!0}},n.accounts.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),r.a.createElement(q.a,{fullWidth:!0,label:"Amount",type:"number",value:this.state.fromAccountValue,onChange:this.handleChange("fromAccountValue"),className:a.dense}),r.a.createElement(Je.a,{className:a.dense},"The transfer will happen with an exchange rate of: ",r.a.createElement("b",null,String(l)))),r.a.createElement(M.a,null,r.a.createElement(I.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(I.a,{onClick:this.handleSubmit,className:a.actionButton},"Transfer"))))}}]),t}(r.a.Component),dt=Object(g.a)(Object(p.b)(function(e,t){return{accounts:Ae(e.accounts).filter(function(e){return e.id!==t.fromAccount.id}).sort(function(e,t){return e.name>t.name?1:-1}),rates:e.rates}},{makeTransfer:function(e){return{type:"MAKE_TRANSFER",payload:e}},addHistory:ae}),Object(E.withStyles)(function(e){return{dialog:{maxWidth:"80%",width:300},dense:{marginTop:3*e.spacing.unit},actionButton:{color:"green"}}}))(it),mt=Object(g.a)(Object(E.withStyles)(function(e){return{listSubheader:{display:"flex",justifyContent:"space-between"},actions:Object(h.a)({display:"flex",marginBottom:3*e.spacing.unit,marginTop:3*e.spacing.unit,justifyContent:"space-evenly"},e.breakpoints.down(375),{"& svg":{display:"none"}}),term:{maxWidth:"10em"},desc:{fontWeight:"bold",textAlign:"right"}}}),Object(p.b)(function(e,t){return{account:Ae(e.accounts).find(function(e){return e.id===t.match.params.accountId})||{},hasOtherAccounts:e.accounts.allIds.length>1,rates:e.rates,groups:e.groups}},{fetchRates:re}))(function(e){var t=e.account,a=e.classes,n=e.fetchRates,c=e.groups,l=e.hasOtherAccounts,o=e.rates;if(t.id){o[t.currency]||n(t.currency);var u=Object.entries(o[t.currency]||{}).sort(function(e,t){return e[0]>t[0]?1:-1});return r.a.createElement(D.a,{disablePadding:!0},r.a.createElement(W.a,{disableSticky:!0,className:a.listSubheader},"Details",r.a.createElement("div",null,r.a.createElement(ct,{account:t}),r.a.createElement(et,{account:t}))),r.a.createElement(w.a,null),r.a.createElement(R.a,null,r.a.createElement(P.a,{primary:"Account",className:a.term}),r.a.createElement(P.a,{primary:t.name,primaryTypographyProps:{className:a.desc}})),r.a.createElement(w.a,null),r.a.createElement(R.a,null,r.a.createElement(P.a,{primary:"Group",className:a.term}),r.a.createElement(P.a,{primary:c.byId[t.groupId].name,primaryTypographyProps:{className:a.desc}})),r.a.createElement(w.a,null),r.a.createElement(R.a,null,r.a.createElement(P.a,{primary:"Balance",className:a.term}),r.a.createElement(P.a,{primary:Number(t.value).toFixed(2)+" "+t.currency,primaryTypographyProps:{className:a.desc}})),r.a.createElement(w.a,null),r.a.createElement("div",{className:a.actions},r.a.createElement(Ye,{account:t}),r.a.createElement(ot,{account:t}),l&&r.a.createElement(dt,{fromAccount:t})),r.a.createElement(w.a,null),r.a.createElement(Pe.a,{className:a.table},r.a.createElement(Le.a,null,r.a.createElement(Me.a,null,r.a.createElement(_e.a,{colSpan:"2"},"Currency rates against the ",t.currency))),r.a.createElement(We.a,null,u.map(function(e){var t=Object(Re.a)(e,2),a=t[0],n=t[1];return r.a.createElement(Me.a,{key:a},r.a.createElement(_e.a,{component:"th",scope:"row"},a),r.a.createElement(_e.a,{align:"right"},n))}))))}return r.a.createElement(Ge,null)}),pt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(e){var t=e.target.value;a.props.fetchRates(t),a.props.changeDefaultCurrency(t),a.props.addHistory({text:"Default currency was changed to ".concat(t),date:A()().format()})}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(q.a,{select:!0,value:this.props.defaultCurrency,onChange:this.handleChange(),SelectProps:{native:!0}},X.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))}}]),t}(r.a.Component),ht={addAccount:te,addHistory:ae,fetchRates:re,changeDefaultCurrency:ne},ft=Object(p.b)(function(e){return{defaultCurrency:e.settings.defaultCurrency}},ht)(pt),yt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){a.props.resetData(),a.handleClose()},a.state={open:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(I.a,{onClick:this.handleOpen,color:"secondary"},"Reset"),r.a.createElement(L.a,{PaperProps:{className:e.dialog},open:this.state.open,onClose:this.handleClose,"aria-labelledby":"reset-dialog-title"},r.a.createElement(Y.a,{id:"reset-dialog-title"},"Reset All Data"),r.a.createElement(K.a,null,r.a.createElement(Je.a,null,"This action will remove all accounts, rates and history and cannot be undone.",r.a.createElement("br",null),r.a.createElement("br",null),"Are you sure?")),r.a.createElement(M.a,null,r.a.createElement(I.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(Ee.a,{to:"/",className:"noDecoration"},r.a.createElement(I.a,{onClick:this.handleSubmit,color:"secondary"},"Reset")))))}}]),t}(r.a.Component),bt=Object(g.a)(Object(E.withStyles)(function(e){return{dialog:{maxWidth:"80%",width:450}}}),Object(p.b)(null,{resetData:function(){return{type:"RESET_DATA"}}}))(yt),gt=function(){return r.a.createElement(D.a,{disablePadding:!0},r.a.createElement(W.a,{disableSticky:!0},"Settings"),r.a.createElement(w.a,null),r.a.createElement(R.a,null,r.a.createElement(P.a,{primary:"Default Currency"}),r.a.createElement(ft,null)),r.a.createElement(w.a,null),r.a.createElement(R.a,null,r.a.createElement(P.a,{primary:"Reset All Data"}),r.a.createElement(bt,null)),r.a.createElement(w.a,null))},Et=a(147),Ot=a.n(Et),vt=a(148),Ct=a.n(vt),jt=a(81),At=a.n(jt),St=a(149),It=a.n(St),Nt=a(101),wt=a.n(Nt),kt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(e){a.setState({menuAnchorEl:e.currentTarget})},a.handleClose=function(){a.setState({menuAnchorEl:null})},a.state={menuAnchorEl:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.menuAnchorEl;return r.a.createElement(Ot.a,{position:"static",color:"primary"},r.a.createElement(Ct.a,null,r.a.createElement(ke.a,{variant:"h6",color:"inherit",className:e.grow},r.a.createElement(Ee.a,{to:"/",className:"noDecoration inheritColor"},"React Wallet")),r.a.createElement($e.a,{"aria-owns":t?"simple-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick,color:"inherit"},r.a.createElement(At.a,null)),r.a.createElement(It.a,{id:"simple-menu",anchorEl:t,open:Boolean(t),onClose:this.handleClose},r.a.createElement(wt.a,{component:Ee.a,to:"/history",onClick:this.handleClose,className:e.menuItem},"History"),r.a.createElement(wt.a,{component:Ee.a,to:"/settings",onClick:this.handleClose,className:e.menuItem},"Settings"))))}}]),t}(r.a.Component),Dt=Object(E.withStyles)({grow:{flexGrow:1},menuItem:{minWidth:"120px"}})(kt),Tt=Object(p.b)(function(e){return{history:e.history}})(function(e){var t=e.history;return t.length?r.a.createElement(D.a,{disablePadding:!0},r.a.createElement(W.a,{disableSticky:!0},"History"),r.a.createElement(w.a,null),t.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(R.a,null,r.a.createElement(P.a,{primary:e.text,secondary:A()(e.date).calendar(),secondaryTypographyProps:{style:{textAlign:"right"}}})),r.a.createElement(w.a,null))})):r.a.createElement(De,{title:"Your history is empty"},"Add some accounts and make some transfers to populate the list")}),Rt=Object(g.a)(Object(E.withStyles)(function(e){return{paper:Object(h.a)({width:"auto",margin:2*e.spacing.unit},e.breakpoints.up(680),{width:600,marginTop:6*e.spacing.unit,marginBottom:6*e.spacing.unit,marginLeft:"auto",marginRight:"auto"})}}),Object(p.b)())(function(e){var t=e.classes;return r.a.createElement(f.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt,null),r.a.createElement(v.a,{className:t.paper},r.a.createElement(y.a,null,r.a.createElement(b.a,{exact:!0,path:"/",component:Te}),r.a.createElement(b.a,{path:"/history",component:Tt}),r.a.createElement(b.a,{path:"/settings",component:gt}),r.a.createElement(b.a,{path:"/details/:accountId",render:function(e){return r.a.createElement(mt,e)}}),r.a.createElement(b.a,{component:Ge})))))}),xt=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.accounts.map(function(e){return e.currency});Object(o.a)(new Set(e)).length>1&&this.props.fetchRates(this.props.defaultCurrency)}},{key:"render",value:function(){return r.a.createElement(Rt,null)}}]),t}(n.Component),Pt=Object(p.b)(function(e){return{accounts:Ae(e.accounts),defaultCurrency:e.settings.defaultCurrency}},{fetchRates:re})(xt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ft=a(151),Wt=a(152),Ht={defaultCurrency:"EUR"},_t=Object(le.c)({accounts:je,groups:ue,history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_HISTORY":return t.payload.text=t.payload.text.replace(/ {2}/g,""),[t.payload].concat(Object(o.a)(e));default:return e}},rates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_RATES_SUCCESS":return Object(C.a)({},e,t.payload);default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DEFAULT_CURRENCY":return Object(C.a)({},e,{defaultCurrency:t.payload});default:return e}}}),Ut=Object(C.a)({accounts:{},history:[],rates:{}},JSON.parse(localStorage.getItem("reactwallet")));Ut.accounts=ee(Ut.accounts),Ut.groups=ee(Ut.groups);var Lt=Object(le.d)(function(e,t){return"RESET_DATA"===t.type&&(e=void 0),"LOAD_DEMO_DATA"===t.type&&(e=Object(C.a)({},e,{accounts:ee([{name:"Wallet",id:$(),currency:"USD",value:500,groupId:e.groups.allIds[0]},{name:"Travel Change",id:$(),currency:"EUR",value:95,groupId:e.groups.allIds[0]},{name:"Debit Card",id:$(),currency:"USD",value:8500,groupId:e.groups.allIds[1]},{name:"TransferWise",id:$(),currency:"USD",value:1500,groupId:e.groups.allIds[1]},{name:"Canadian Account",id:$(),currency:"CAD",value:500,groupId:e.groups.allIds[1]},{name:"P2P Lending",id:$(),currency:"EUR",value:5e3,groupId:e.groups.allIds[3]},{name:"Stocks",id:$(),currency:"USD",value:5e3,groupId:e.groups.allIds[3]},{name:"Crypto funds",id:$(),currency:"USD",value:5e3,groupId:e.groups.allIds[3]},{name:"PayPal",id:$(),currency:"USD",value:500,groupId:e.groups.allIds[4]}]),settings:{defaultCurrency:"USD"}})),_t(e,t)},Ut,Object(le.a)(Wt.a));Lt.subscribe(Object(Ft.throttle)(function(){localStorage.setItem("reactwallet",JSON.stringify(Lt.getState()))},1e3));var Bt=Lt;l.a.render(r.a.createElement(p.a,{store:Bt},r.a.createElement(Pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5366,2,1]]]);
//# sourceMappingURL=main.0714b14f.chunk.js.map